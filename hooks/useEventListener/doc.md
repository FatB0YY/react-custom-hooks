# useEventListener

Хук для добавления слушателя события к DOM-элементу, на который ссылается переданный `ref`.
Обработчик события добавляется, если параметр `active` равен true, и автоматически удаляется при размонтировании или изменении зависимостей.

Хук `useEventListener` позволяет удобно добавлять и удалять обработчики событий на DOM-элементе (или любом другом объекте, реализующем интерфейс EventTarget), на который ссылается переданный `ref`. Он учитывает жизненный цикл компонента React и автоматически выполняет очистку, удаляя слушателя при размонтировании или изменении зависимостей.

В этом хуке также важно передавать состояние `active`, чтобы явно указывать когда есть активная ссылка на DOM-элемент.

Хук ничего не возвращает.

## Разбор работы хука:

1. **Типизация события**

   Хук использует условный тип `GetWindowEvent<Type>`, который проверяет, есть ли переданный тип события (`Type`) в стандартном объекте `WindowEventMap`:

   - Если тип события присутствует в `WindowEventMap` (например, `"click"`, `"keydown"` и т.п.), то обработчик будет типизирован именно под соответствующее событие (например, MouseEvent для `"click"`).
   - Если тип события не найден в `WindowEventMap`, в качестве типа события используется базовый тип `Event`.

2. **Перегрузка функции**

   Реализовано две перегрузки:

   - **Первая перегрузка**: Применяется, когда тип события присутствует в `WindowEventMap`. Это позволяет обеспечить более точную типизацию для стандартных событий браузера.
   - **Вторая (общая) перегрузка**: Применяется для всех остальных случаев, когда тип события задаётся как произвольная строка.

3. **Использование хука useEvent**

   `useEvent` - Возвращает стабильный колбэк, всегда вызывающий последнюю версию переданной функции (всегда актуальную). То есть колбэк теперь всегда будет вызываться по одной ссылке, но иметь всегда актуальную реализацию.

4. **Добавление и удаление слушателя**

   - Хук использует `useEffect`, чтобы синхронизировать добавление слушателя с жизненным циклом компонента. И реагировать на изменения зависимостей.
   - Если параметр `active` имеет значение `false`, то слушатель события не добавляется. Так как, например, может не быть DOM-элемента.
   - Если `active` равен `true`, внутри эффекта происходит следующее:
     - Получается текущий DOM-элемент через `elementRef.current`.
     - Если элемент существует, к нему добавляется слушатель с помощью `element.addEventListener(type, eventCb)`.
     - Функция, возвращаемая из `useEffect`, удаляет слушатель (через `element.removeEventListener(type, eventCb)`), когда эффект "перезапускается" (например, при изменении зависимостей) или при размонтировании компонента.
